task cleanUp {
    doFirst() {
        println 'Cleanup executed'
    }
}
task fails {
    finalizedBy cleanUp
    doFirst() {
        throw new RuntimeException()
    }
}
